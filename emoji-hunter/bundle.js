(()=>{"use strict";var e={365:(e,t,n)=>{n.d(t,{A:()=>p});var i=n(601),r=n.n(i),o=n(314),a=n.n(o),s=n(417),l=n.n(s),d=new URL(n(684),n.b),u=new URL(n(80),n.b),c=new URL(n(455),n.b),h=a()(r()),g=l()(d),m=l()(u),S=l()(c);h.push([e.id,`:root {\n    --strong-dark-blue: #2A2859;\n    --strong-red: #FF8274;\n    --strong-blue: #6FE9FF;\n    --light-blue: #D1F9FF;\n    --light-green: #C7f6C9;\n    --strong-beige: #D0BFAE;\n    --yellow: #F9C66B;\n    --red: #FF8274;\n    --green: #43F8B6;\n}\n\n@font-face {\n    font-family: "SpeedRush";\n    src: url(${g}) format("truetype");\n}\n\n@font-face {\n    font-family: "SpeedRushItalic";\n    src: url(${m}) format("truetype");\n}\n\n* {\n    margin: 0;\n}\n\nbody {\n    font-family: "SpeedRush", sans-serif;\n    color: var(--strong-dark-blue);\n    user-select: none;\n}\n\nh1 {\n    font-size: 3em;\n}\n\nh2 {\n    font-size: 2.5em;\n}\n\nh3 {\n    font-size: 1.75em;\n}\n\np {\n    font-size: 1.5em;\n}\n\n.mtl { margin-top: 2rem;}\n.mtm { margin-top: 1rem;}\n.mts { margin-top: 0.5rem;}\n.mbl { margin-bottom: 2rem;}\n.mbm { margin-bottom: 1rem;}\n.mbs { margin-bottom: 0.5rem;}\n\n#game-title {\n    margin-top: 0.1em;\n    margin-bottom: 0.3em;\n}\n\n#game-scene {\n    height: 100vh;\n    display: grid;\n    grid-template-columns: 1fr 1fr;\n    grid-template-rows: min-content 1fr min-content;\n    gap: 0 0;\n    grid-template-areas:\n    "game-header game-header"\n    "game-area game-area"\n    "game-player1 game-player2";\n}\n\n#game-header {\n    grid-area: game-header;\n    background-color: var(--strong-blue);\n    border-bottom: var(--strong-dark-blue) solid thin;\n    text-align: center;\n}\n\n#game-area {\n    grid-area: game-area;\n    position: relative;\n    background-color: var(--light-blue);\n    background-image: url(${S});\n    background-position: bottom;\n    background-size: 100% auto;\n    background-repeat: no-repeat;\n}\n\n#debug-logger {\n    position: absolute;\n    bottom: 0;\n    line-height: 1.2em;\n    height: 18em;\n    overflow-y: auto;\n    display: flex;\n    flex-direction: column-reverse;\n    font-family: sans-serif;\n    visibility: hidden;\n    z-index: -1;\n}\n\n.dialog-screen {\n    position: absolute;\n    left: 0;\n    right: 0;\n    top: 0;\n    bottom: 0;\n    margin: auto;\n    display: flex;\n    flex-direction: row;\n    align-items: center;\n    justify-content: center;\n}\n\n.dialog-screen-content {\n    width: 60em;\n    height: 43em;\n    margin-left: 2em;\n    margin-right: 2em;\n    display: flex;\n    flex-direction: column;\n    align-items: center;\n    justify-content: center;\n}\n\n.dialog-screen-start, .dialog-screen-quit {\n    height: 43em;\n    width: 15em;\n    display: flex;\n    align-items: center;\n    justify-content: center;\n}\n\n.dialog-action-text {\n    writing-mode: vertical-lr;\n    transform: rotate(180deg);\n    font-size: 5em;\n}\n\n#start-screen .dialog-screen-content {\n    background-color: var(--light-green);\n    border: var(--strong-dark-blue) solid thin;\n}\n\n#start-screen .dialog-screen-start, #start-screen .dialog-screen-quit {\n    background-color: var(--light-green);\n    border: var(--strong-dark-blue) solid thin;\n}\n\n#result-screen .dialog-screen-content {\n    background-color: var(--strong-beige);\n    border: var(--strong-dark-blue) solid thin;\n}\n\n#result-screen .dialog-screen-start, #result-screen .dialog-screen-quit {\n    background-color: var(--strong-beige);\n    border: var(--strong-dark-blue) solid thin;\n}\n\n#key-bindings-screen .dialog-screen-content {\n    background-color: var(--yellow);\n    border: var(--strong-dark-blue) solid thin;\n}\n\n#result-screen {\n    visibility: hidden;\n}\n\n#key-bindings-screen {\n    visibility: hidden;\n    z-index: 1;\n}\n\n#key-bindings-table {\n    font-size: 1.5em;\n}\n\n#key-bindings-table th, td {\n    padding-left: 1em;\n    padding-right: 1em;\n    text-align: left;\n}\n\n.game-player {\n    background-color: var(--light-blue);\n    border-top: var(--strong-dark-blue) solid thin;\n}\n\n#game-player1 {\n    grid-area: game-player1;\n    border-right: var(--strong-dark-blue) solid thin;\n}\n\n#game-player2 {\n    grid-area: game-player2;\n    text-align: right;\n}\n\n.score-bar-player {\n    font-size: 2em;\n    padding: 0.5em;\n    overflow: visible;\n    white-space: nowrap;\n}\n\n#score-bar-player1 {\n    transition: width 1s;\n    background-color: var(--strong-blue);\n}\n\n#score-bar-player2 {\n    transition: width 1s;\n    background-color: var(--strong-red);\n    float: right;\n    direction: rtl;\n}\n\n.target {\n    position: absolute;\n    cursor: crosshair;\n    overflow: hidden;\n    box-sizing: border-box;\n    border: var(--strong-dark-blue) solid thick;\n    border-radius: 50%;\n    box-shadow: 2px 2px 5px rgba(0,0,0,0.2);\n    text-align: center;\n    vertical-align: middle;\n}\n\n.target-player1 {\n    background-color: var(--strong-blue);\n}\n\n.target-player2 {\n    background-color: var(--strong-red);\n}\n\n.target svg {\n    vertical-align: top;\n    width: 65%;\n    padding-top: 9%;\n    --fg-color: var(--strong-dark-blue);\n}\n\n#high-scores-table {\n    font-size: 1.5em;\n}\n\n#high-scores-table th, td {\n    padding-left: 1em;\n    padding-right: 1em;\n}\n\n.high-score-name {\n    text-align: left;\n}\n\n.high-score-time {\n    font-size: 0.75em;\n}\n\n.flip-animation {\n    animation: flip-animation 2s forwards;\n}\n\n@keyframes flip-animation {\n    50% {\n        opacity: 1;\n        transform: rotateY(360deg);\n    }\n    100% {\n        opacity: 0;\n        transform: rotateY(360deg);\n    }\n}\n\n.expire-animation {\n    animation: expire-animation 1s forwards;\n}\n\n@keyframes expire-animation {\n    100% {\n        opacity: 0;\n    }\n}\n\n.click-animation {\n    animation: click-animation 0.4s ease-out;\n    position: fixed;\n    box-sizing: border-box;\n    border-style: solid;\n    border-color: var(--strong-beige);\n    border-radius: 50%;\n    z-index: 99999;\n}\n\n@keyframes click-animation {\n    0% {\n        opacity: 1;\n        width: 0.5em;\n        height: 0.5em;\n        margin: -0.25em;\n        border-width: 0.5em;\n    }\n    100% {\n        opacity: 0.2;\n        width: 5em;\n        height: 5em;\n        margin: -2.5em;\n        border-width: 0.03em;\n    }\n}\n\n.score {\n    position: absolute;\n    font-size: 3em;\n    text-align: center;\n}\n\n.score-fruit, .score-bonus {\n    color: var(--yellow);\n}\n\n.score-medicine {\n    color: var(--green);\n}\n\n.score-devil {\n    color: var(--red);\n}\n\n.score-animation {\n    animation: score-animation 1s linear forwards;\n}\n\n@keyframes score-animation {\n    100% {\n        opacity: 0;\n        transform: translateY(-100px);\n    }\n}`,""]);const p=h},314:e=>{e.exports=function(e){var t=[];return t.toString=function(){return this.map((function(t){var n="",i=void 0!==t[5];return t[4]&&(n+="@supports (".concat(t[4],") {")),t[2]&&(n+="@media ".concat(t[2]," {")),i&&(n+="@layer".concat(t[5].length>0?" ".concat(t[5]):""," {")),n+=e(t),i&&(n+="}"),t[2]&&(n+="}"),t[4]&&(n+="}"),n})).join("")},t.i=function(e,n,i,r,o){"string"==typeof e&&(e=[[null,e,void 0]]);var a={};if(i)for(var s=0;s<this.length;s++){var l=this[s][0];null!=l&&(a[l]=!0)}for(var d=0;d<e.length;d++){var u=[].concat(e[d]);i&&a[u[0]]||(void 0!==o&&(void 0===u[5]||(u[1]="@layer".concat(u[5].length>0?" ".concat(u[5]):""," {").concat(u[1],"}")),u[5]=o),n&&(u[2]?(u[1]="@media ".concat(u[2]," {").concat(u[1],"}"),u[2]=n):u[2]=n),r&&(u[4]?(u[1]="@supports (".concat(u[4],") {").concat(u[1],"}"),u[4]=r):u[4]="".concat(r)),t.push(u))}},t}},417:e=>{e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},601:e=>{e.exports=function(e){return e[1]}},72:e=>{var t=[];function n(e){for(var n=-1,i=0;i<t.length;i++)if(t[i].identifier===e){n=i;break}return n}function i(e,i){for(var o={},a=[],s=0;s<e.length;s++){var l=e[s],d=i.base?l[0]+i.base:l[0],u=o[d]||0,c="".concat(d," ").concat(u);o[d]=u+1;var h=n(c),g={css:l[1],media:l[2],sourceMap:l[3],supports:l[4],layer:l[5]};if(-1!==h)t[h].references++,t[h].updater(g);else{var m=r(g,i);i.byIndex=s,t.splice(s,0,{identifier:c,updater:m,references:1})}a.push(c)}return a}function r(e,t){var n=t.domAPI(t);return n.update(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap&&t.supports===e.supports&&t.layer===e.layer)return;n.update(e=t)}else n.remove()}}e.exports=function(e,r){var o=i(e=e||[],r=r||{});return function(e){e=e||[];for(var a=0;a<o.length;a++){var s=n(o[a]);t[s].references--}for(var l=i(e,r),d=0;d<o.length;d++){var u=n(o[d]);0===t[u].references&&(t[u].updater(),t.splice(u,1))}o=l}}},659:e=>{var t={};e.exports=function(e,n){var i=function(e){if(void 0===t[e]){var n=document.querySelector(e);if(window.HTMLIFrameElement&&n instanceof window.HTMLIFrameElement)try{n=n.contentDocument.head}catch(e){n=null}t[e]=n}return t[e]}(e);if(!i)throw new Error("Couldn't find a style target. This probably means that the value for the 'insert' parameter is invalid.");i.appendChild(n)}},540:e=>{e.exports=function(e){var t=document.createElement("style");return e.setAttributes(t,e.attributes),e.insert(t,e.options),t}},56:(e,t,n)=>{e.exports=function(e){var t=n.nc;t&&e.setAttribute("nonce",t)}},825:e=>{e.exports=function(e){if("undefined"==typeof document)return{update:function(){},remove:function(){}};var t=e.insertStyleElement(e);return{update:function(n){!function(e,t,n){var i="";n.supports&&(i+="@supports (".concat(n.supports,") {")),n.media&&(i+="@media ".concat(n.media," {"));var r=void 0!==n.layer;r&&(i+="@layer".concat(n.layer.length>0?" ".concat(n.layer):""," {")),i+=n.css,r&&(i+="}"),n.media&&(i+="}"),n.supports&&(i+="}");var o=n.sourceMap;o&&"undefined"!=typeof btoa&&(i+="\n/*# sourceMappingURL=data:application/json;base64,".concat(btoa(unescape(encodeURIComponent(JSON.stringify(o))))," */")),t.styleTagTransform(i,e,t.options)}(t,e,n)},remove:function(){!function(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e)}(t)}}}},113:e=>{e.exports=function(e,t){if(t.styleSheet)t.styleSheet.cssText=e;else{for(;t.firstChild;)t.removeChild(t.firstChild);t.appendChild(document.createTextNode(e))}}},455:(e,t,n)=>{e.exports=n.p+"6070222dd4306a3ec5e3.svg"},684:(e,t,n)=>{e.exports=n.p+"c80aa14a3e352e2b7e18.ttf"},80:(e,t,n)=>{e.exports=n.p+"060cc1c498b49ac0ee6b.ttf"},147:e=>{e.exports=JSON.parse('{"system":{"useLivenessTimer":false,"useRemoteMessageHandler":false,"useRemoteHighScores":false,"showDebugLogger":true},"localStorage":{"nicknameGeneratorKey":"emoji-hunter-nickname-index","highScoreKey":"emoji-hunter-high-score","configKey":"emoji-hunter-config"},"game":{"penalty":{"points":1,"updaterInitialSleepTime":500,"updaterDecreaseFrequency":5,"updaterDecreaseSleepTime":200,"updaterMinimumSleepTime":50},"target":{"count":4,"updaterSleepTime":5000}},"sound":{"useBackgroundMusic":false,"useSoundEffects":false,"masterVolume":1,"backgroundMusicVolume":1,"deadSoundVolume":0.5,"scoreSoundVolume":0.5,"bonusSoundVolume":0.4,"devilSoundVolume":0.5,"medicineSoundVolume":0.5},"emoji":{"width":{"small":150,"medium":225,"large":300},"fontSize":{"small":"5em","medium":"8em","large":"11em"},"probability":{"bonus":0.03,"devil":0.05,"medicine":0.2},"score":{"bonus":{"score":1000,"health":25},"devil":{"score":-500,"health":0},"medicine":{"score":0,"health":20},"fruit":{"score":200,"health":5}}}}')},13:e=>{e.exports=JSON.parse('{"system":{"useLivenessTimer":true,"useRemoteMessageHandler":true,"useRemoteHighScores":true,"showDebugLogger":false},"localStorage":{"nicknameGeneratorKey":"emoji-hunter-nickname-index","highScoreKey":"emoji-hunter-high-score","configKey":"emoji-hunter-config"},"game":{"penalty":{"points":1,"updaterInitialSleepTime":500,"updaterDecreaseFrequency":5,"updaterDecreaseSleepTime":200,"updaterMinimumSleepTime":50},"target":{"count":4,"updaterSleepTime":5000}},"sound":{"useBackgroundMusic":true,"useSoundEffects":true,"masterVolume":1,"backgroundMusicVolume":1,"deadSoundVolume":0.5,"scoreSoundVolume":0.5,"bonusSoundVolume":0.4,"devilSoundVolume":0.5,"medicineSoundVolume":0.5},"emoji":{"width":{"small":150,"medium":225,"large":300},"fontSize":{"small":"5em","medium":"8em","large":"11em"},"probability":{"bonus":0.03,"devil":0.05,"medicine":0.2},"score":{"bonus":{"score":1000,"health":25},"devil":{"score":-500,"health":0},"medicine":{"score":0,"health":20},"fruit":{"score":200,"health":5}}}}')}},t={};function n(i){var r=t[i];if(void 0!==r)return r.exports;var o=t[i]={id:i,exports:{}};return e[i](o,o.exports,n),o.exports}n.m=e,n.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return n.d(t,{a:t}),t},n.d=(e,t)=>{for(var i in t)n.o(t,i)&&!n.o(e,i)&&Object.defineProperty(e,i,{enumerable:!0,get:t[i]})},n.g=function(){if("object"==typeof globalThis)return globalThis;try{return this||new Function("return this")()}catch(e){if("object"==typeof window)return window}}(),n.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e;n.g.importScripts&&(e=n.g.location+"");var t=n.g.document;if(!e&&t&&(t.currentScript&&(e=t.currentScript.src),!e)){var i=t.getElementsByTagName("script");if(i.length)for(var r=i.length-1;r>-1&&(!e||!/^http(s?):/.test(e));)e=i[r--].src}if(!e)throw new Error("Automatic publicPath is not supported in this browser");e=e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/"),n.p=e})(),n.b=document.baseURI||self.location.href,n.nc=void 0,(()=>{class e{static pickRandom(e){return e[Math.floor(Math.random()*e.length)]}static sleep(e){return new Promise((t=>setTimeout(t,e)))}static currentTimeAsLocalString(){const e=new Date;return String(e.getHours()).padStart(2,"0")+":"+String(e.getMinutes()).padStart(2,"0")+":"+String(e.getSeconds()).padStart(2,"0")}static timestampAsLocalString(e){const t=new Date(e);return`${String(t.getDate()).padStart(2,"0")}.${String(t.getMonth()+1).padStart(2,"0")}.${String(t.getFullYear())} ${String(t.getHours()).padStart(2,"0")}:${String(t.getMinutes()).padStart(2,"0")}`}}const t=e.pickRandom,i=e.sleep,r=e.currentTimeAsLocalString,o=e.timestampAsLocalString;class a extends EventTarget{static#e="targetRemoved";static#t="playerDead";static#n="configUpdated";sendTargetRemoved(e){this.dispatchEvent(new CustomEvent(this.getTargetRemovedType(),{detail:{player:e}}))}sendPlayerDead(e){this.dispatchEvent(new CustomEvent(this.getPlayerDeadType(),{detail:{player:e}}))}sendConfigUpdated(e,t){this.dispatchEvent(new CustomEvent(this.getConfigUpdatedType(),{detail:{key:e,value:t}}))}getTargetRemovedType(){return a.#e}getPlayerDeadType(){return a.#t}getConfigUpdatedType(){return a.#n}}const s=new a;class l{static#i="showDebugLogger";static#r="useSoundEffects";static#o="useBackgroundMusic";static#a="masterVolume";#s=this.#l();constructor(){this.handleConfigUpdated=this.handleConfigUpdated.bind(this),s.addEventListener(s.getConfigUpdatedType(),this.handleConfigUpdated)}isProduction(){return!0}getConfig(){return this.#s}getShowDebugLoggerConfigKey(){return l.#i}getUseSoundEffectsConfigKey(){return l.#r}getUseBackgroundMusicConfigKey(){return l.#o}getMasterVolumeConfigKey(){return l.#a}#l(){const e=this.#d(),t=this.#u();for(const n in t)t.hasOwnProperty(n)&&this.#c(e,n,t[n]);return e}#d(){return this.isProduction()?n(13):n(147)}#u(){return JSON.parse(localStorage.getItem(this.#d().localStorage.configKey))||{}}#c(e,t,n){for(const i in e)"object"==typeof e[i]?this.#c(e[i],t,n):i===t&&(e[i]=n)}handleConfigUpdated(e){const t=this.#u();t[e.detail.key]=e.detail.value,localStorage.setItem(this.#d().localStorage.configKey,JSON.stringify(t))}}const d=new l,u=d.getConfig();class c{static#h=100;#g=document.getElementById("debug-logger");#m=[];constructor(){this.#S(u.system.showDebugLogger)}log(e){this.#m.length>=c.#h&&this.#m.shift(),this.#m.push(`${r()}: ${e}`),this.#g.innerHTML=this.#m.join("<br/>")}toggleVisibility(){this.#S(!this.isVisible());const e=d.getShowDebugLoggerConfigKey();s.sendConfigUpdated(e,this.isVisible())}#S(e){this.#g.style.visibility=e?"visible":"hidden"}isVisible(){return"hidden"!==this.#g.style.visibility}}const h=new c,g=new class{#p=document.getElementById("background-music");#y=document.getElementById("dead-sound-1");#f=document.getElementById("dead-sound-2");#b=[document.getElementById("bonus-sound-1"),document.getElementById("bonus-sound-2"),document.getElementById("bonus-sound-3"),document.getElementById("bonus-sound-4"),document.getElementById("bonus-sound-5")];#v=[document.getElementById("devil-sound-1"),document.getElementById("devil-sound-2"),document.getElementById("devil-sound-3"),document.getElementById("devil-sound-4"),document.getElementById("devil-sound-5")];#E=[document.getElementById("medicine-sound-1"),document.getElementById("medicine-sound-2"),document.getElementById("medicine-sound-3"),document.getElementById("medicine-sound-4"),document.getElementById("medicine-sound-5")];#k=[document.getElementById("score-sound-1"),document.getElementById("score-sound-2"),document.getElementById("score-sound-3"),document.getElementById("score-sound-4"),document.getElementById("score-sound-5")];#C=0;#T=0;#B=0;#R=0;#D;constructor(){this.setMasterVolume(u.sound.masterVolume)}setMasterVolume(e){this.#D=e,h.log(`Set master volume: ${e}`),s.sendConfigUpdated(d.getMasterVolumeConfigKey(),e),this.#p.volume=u.sound.backgroundMusicVolume*e,this.#y.volume=u.sound.deadSoundVolume*e,this.#f.volume=u.sound.deadSoundVolume*e,this.#b.forEach((t=>t.volume=u.sound.bonusSoundVolume*e)),this.#v.forEach((t=>t.volume=u.sound.devilSoundVolume*e)),this.#E.forEach((t=>t.volume=u.sound.medicineSoundVolume*e)),this.#k.forEach((t=>t.volume=u.sound.scoreSoundVolume*e))}getMasterVolume(){return this.#D}toggleUseBackgroundMusic(){const e=d.getUseBackgroundMusicConfigKey();u.sound[e]=!u.sound[e],h.log(`Use background music: ${u.sound[e]}`),s.sendConfigUpdated(e,u.sound[e])}isUseBackgroundMusic(){return u.sound[d.getUseBackgroundMusicConfigKey()]}toggleUseSoundEffects(){const e=d.getUseSoundEffectsConfigKey();u.sound[e]=!u.sound[e],h.log(`Use sound effects: ${u.sound[e]}`),s.sendConfigUpdated(e,u.sound[e])}isUseSoundEffects(){return u.sound[d.getUseSoundEffectsConfigKey()]}playBackgroundMusicFromStart(){u.sound.useBackgroundMusic&&(h.log("Play background music from start"),this.#p.currentTime=0,this.#p.play())}playBackgroundMusic(){u.sound.useBackgroundMusic&&(h.log("Start background music"),this.#p.play())}pauseBackgroundMusic(){h.log("Pause background music"),this.#p.pause()}playPlayerDead(e){u.sound.useSoundEffects&&(e.isPlayer1()?this.#y.play():this.#f.play())}playTargetHit(e){e.isBonus()?this.#I():e.isDevil()?this.#F():e.isMedicine()?this.#w():this.#M()}#I(){if(u.sound.useSoundEffects)return this.#C=this.#C+1,this.#C>=this.#b.length&&(this.#C=0),this.#b[this.#C].play()}#F(){if(u.sound.useSoundEffects)return this.#T=this.#T+1,this.#T>=this.#v.length&&(this.#T=0),this.#v[this.#T].play()}#w(){if(u.sound.useSoundEffects)return this.#B=this.#B+1,this.#B>=this.#E.length&&(this.#B=0),this.#E[this.#B].play()}#M(){if(u.sound.useSoundEffects)return this.#R=this.#R+1,this.#R>=this.#k.length&&(this.#R=0),this.#k[this.#R].play()}},m=n.p+"cec142e7e7dce45254ed.svg";class S{#x;#P;#V;#G;#H;#W=!1;constructor(e,t,n,i){this.#x=n,this.#P=t,this.#V=i,this.#G=n.size.width,this.#H=this.#N(e,t,n)}#N(e,t,n){h.log(`Add image (${this.#V.x}, ${this.#V.y})`);const i=document.createElement("div");return i.classList.add("target",`target-${t.id}`),i.style.fontSize=n.size.fontSize,i.style.left=`${this.#V.x}px`,i.style.top=`${this.#V.y}px`,i.style.width=`${this.#G}px`,i.style.height=`${this.#G}px`,i.style.lineHeight=`${this.#G}px`,n.isBonus()?i.innerHTML=m:i.textContent=n.emoji,i.addEventListener("animationend",(function(){i.parentElement.removeChild(i),s.sendTargetRemoved(t)})),i.addEventListener("click",function(n){this.#L(n,i,e,t)}.bind(this)),e.appendChild(i),i}#L(e,t,n,i){if(this.#W||this.#P.isDead())return;this.#W=!0;const r=e.clientX-t.offsetLeft-this.#G/2,o=e.clientY-t.offsetTop-n.offsetTop-this.#G/2;h.log(`Clicked target (${r}, ${o})`),i.increaseScore(this.#x.score,this.#x.health),t.classList.add("flip-animation"),g.playTargetHit(this.#x),this.#A(n,t,this.#x,e.clientX,e.clientY-n.offsetTop)}#A(e,t,n,i,r){const o=document.createElement("div");o.classList.add("score",`score-${n.type}`,"score-animation"),o.style.width="200px",o.style.left=i-100+"px",o.style.top=`${r}px`,n.isMedicine()?o.textContent=`❤️ ${n.health}`:o.textContent=n.score,o.addEventListener("animationend",(()=>{o.parentElement.removeChild(o)})),e.appendChild(o)}expire(){this.#W=!0,this.#H.classList.add("expire-animation")}isLocked(){return this.#W}getEmoji(){return this.#x}getPosition(){return this.#V}getPlayer(){return this.#P}}class p{static#z=["Boom Beach Luvr","Star Veil","Crash Override","Gash","Javelin","Sidewalk Enforcer","Data Fog","Fast Lane","Desperado","Neon Dust","Shadow Chaser","Luna Craft","Zen Pulse","Tide Blitz","Storm Vein","Accidental Genius","Ember Rush","Dancing Madman","Maximus","Wolf Frost","Moon Veil","Dawn Rider","Tide Storm","Blaze Rush","Rubix Cube","Quick Sage","Disco Thunder","Void Frost","Frost Echo","Sugar Rush","Traumatic Acid","Nova Craft","Wind Fury","Shadow Craft","Blaze It","Star Storm","Drop Stone","Night Glow","Thunder","Star Blaze","Sasquatch","Arsenal","Volt Shard","Iron Wind","Star Weave","Lone Wolf","Quantum Craft","Jaguar","Dawn Rage","Yellow Lion","Dragon","Mad Max","Vortex Fang","Dawn Veil","Storm Fox","Bleed","Bomber Machine","Ultra","Silk Echo","Arsenic Coo","Sky Rift","Sun Fang","Frost Vex","Lee Trunk","Blood Run","Skull Crusher","Dr Disconnect","Viper Sun","Death Stalker","Ether Craft","Scrapple","Data Drift","Scary Ninja","Frenzy","Feral Mayhem","Cloud Storm","Cyber Echo","Tide Rift","Bullet Proof","Iron Fleet","Zen Magnet","Gold Blitz","Gloom Star","Iron Craft","Commando","Astro Craft","Carbine","Wild Wave","Carbon","Sea Spear","Asaurus Rex","Neon Rune","Wild Blade","Iron Cut","Frost Fury","Ironsides","Gunsly Lee","Wolf Myst","Geisha","Vortex Void","Rune Fury","Sea Whirl","Cross Thread","Planet Destroyer","Cursed Soul","Mademoiselle","Tech Rune","Swift Storm","Moon Blitz","Wind Rider","Void Gale","Swift Gale","Ember Rider","Titan Shade","Luna Dust","Ice Flare","Night Surge","Swift Rue","Doomsday","Wild Fern","Zen Stone","Lynch","Shadow Bishop","James Bomb","Byte Echo","Dawn Rush","Khan","Diablo","Indominus","Vein","Lava Frost","Wind Surge","Skeleton","Sky Razor","Dark Echo","Trink","Gale Fire","Flame Veil","Blaze Storm","Lunar Rage","Frost Blitz","Trooper","Derange","Blood Eater","Stargirl","Nova Blitz","Aspect","Ember Void","Ice Storm","Frost Root","Vortex Eye","Gold Storm","TBack","Mirage","Night Frost","Dark Meld","Silk Whirl","Hash","Tech Dust","Zen Gale","Desert Haze","Avenger","Star Blitz","Insanity","Flame Surge","Dusk Petal","Scorpion","Cat Woman","The Armor","Raven","Mr Cool","Bit Craft","Sky Gale","Wave Dust","Redmouth","Bloodbath Punk","Say Cheese","Abominable","Steel","Beautify","Ratchet","Dawn Wave","Kraken","Cougar","Orbital X","Cloud Hex","Wicked","Vortex Dust","Astro Fox","Echo Craft","Iron Flare","Reno Monarch","Drift Maniac","Dawn Blitz","Wind Fern","Gold Wave","Grim Ward","Bolt Strike","Black Kitten","Celtic Charger","Wind Slash","Bullet","Sky Storm","Sky Frost","Cyber Hex","Tide Wave","Wind Storm","Bender","Storm Rush","Rune Wave","Belladonna","Void Wave","Ballistic","Slasher","Volt Crash","Twilight","Fender","Clink","Elder Pogue","Dazzler","Manic","Storm Byte","Vortex X","Iron Rift","Wolf Pride","Star Rush","Popper","Bruise","Steelshot","Disco Potato","Vanity","Nebula X","Roadkill","Suleiman","Astro Byte","Stiletto","The Red Wolf","Nova Rage","Blood","Easy Sweep","Echo Wind","Sky Herald","Nightmare","Head Knocker","Sea Frost","Frost Gale","Star Frost","Nova Tide","Quake Myst","Fire Halo","Kneecap","Fiend Oblivion","Star Gloom","Got Spammed","Ghost Neb","Blaze Craft","Overthrow","Zen Sleet","Drift Detector","Frost Veil","Quantum Wave","Pixel Craft","Ice Saber","Ragman","Wolf Blitz","Temperament","Leon","Frost Rush","Day Hawk","Ronin","Rune Veil","Sparkly Eyes","Nova Surge","Flame Hex","Void Veil","Alpha","My Arsenal","Collaterol Damage","Luna Spark","Lunar Blitz","Iron Claw","Sun Strike","Pulses","Rebel Of Warlock","Goshawk","Rapid Dust","Night Fyn","Sea Veil","Moon Storm","Void Melt","Majesty","Rocky Highway","Dawn Storm","Tide Rider","Tequila","Spark Wave","Valkyrie","Wolf","Dark Whirl","Mr Blonde","Blaze Veil","Goddess","Moon Gleam","Wolf Gale","Cyber Wing","Fire Storm","Phantom Dust","Athena","Sea Gale","Dawn Surge","Pain Of Exile","Rainbow Ride","Gain Power","Wolf Wave","Tigress","Creep","Infinity","Lightning","Pyro Veil","Fire Blitz","Thorn Ride","Ice Phantom","Nova Dust","The Atom","Data Pulse","Calypso","Minx","Fissure","Nano Craft","Hell Cat","Velvet","Ember Storm","Storm Zen","Boomslang","Ace","Rune Dust","Frost Craft","Moon Gale","Solar Surge","Thorn Hex","Iron Storm","Earl of Arms","Wolf Ruin","Red Mouth","Steel Forge","Frost Weave","Rando Tank","Quartz Law","Myth Dust","Frost Drift","Quake Sun","Pursuit","Sky Dust","Ice Wrath","Lunar Rider","Void Storm","Dusk Tide","Pixel Dust","Hurricane","Strike Eagle","Atom A","Moon Weep","Astro Dust","Sir Shove","Ghost Rex","Storm Vortex","Scar","Byte Dust","Astro Echo","Echo Force","Lunar Surge","Scrapper","Shuri","Phantom Craft","Sol Craft","Dawn Gale","It is Ye","Fire Bred","Fire Drift","Neon Drift","Frost Myst","Hex Whirl","Matrix","Dusk Frost","Zero Craft","Blaze Root","Insurgent","Devil Blade","Zen Wave","Flack","Sea Blitz","Storm Dust","Echo Vortex","Ranger","Siege","Iron Gale","Locker","Ember Star","Heckler","Silk Veil","Alpha Returns","Lunar Wave","Temperance","Night Rider","Devil Chick","Gold Rush","Tattoo","Flame Root","Killed Cupid","The Brown Fox","Killer","Lady Rush","Scab","Bonzai","Data Wing","Void Echo","Sky Spark","Madness Witch","Moon Blaze","Lotus","Night Wind","Wolverine","Romance Guppy","Phantom X","Uproar","Tide Surge","Neon Craft","Cloud Blitz","Frost Dawn","Repulsor","Voodoo","Bit Sentinel","Hornet","Fire Surge","Manchu Man","Flame Rider","Dredd","Silk Fury","Fearless Girl","Darko","Cascade","Silk Rift","Baby Brown","Storm Veil","Rune Tide","Full Rampage","Mad Dog","Void Rush","Flux Mystic","Solar Blitz","Falcon","Pink Dolphin","Luna Fang","Ravage","Sun Wing","Zen Surge","Terrific Boy","Pyro Fang","Glow Blade","Malice","Night Rift","Tide Wind","Pyro Dust","Moon Surge","Neon Echo","Dissent","Silk Wave","Bullwhip","Gargoyle","Not a Celebrity","Hypnosis","Iron Surge","Tide Veil","Centerfire","Nova Storm","Snow Rider","Wild Nimbus","Jade Mist","Steel Shot","Vibranium","Iron Heart","Beretta","Rapid Tech","Lunar Flex","Flex Dust","Knuckles","Iron Echo","Storm Ward","Steel Hail","Enchantress","Wave Craft","Crank","Flame Gale","Star Glider","Wolf Dawn","Admiral Tot","Billy Butcher","Pyro Claw","Bizarro","Twil Sharp","Ember Eye","Death Punch","Glow Storm","Jawbone","Storm Echo","Pixel Storm","Star Surge","Atilla","Magma Tear","Jasmine","Silk Gale","Star Rider","Silk Surge","Glow Surge","Rune Spirit","Ether Dust","Glow Blitz","Neutral Nexus","Code Raven","Vibe Craft","Sun Shadow","Blaze Wave","Astro Drift","Astro Funk","Star Wave","Stream Elements","Night Tide","Tide Echo","Shooter","Psycho Thinker","Revenge Of Omega","Glow Meld","Solar Fury","Dawn Bolt","Razor Wave","Zen Frost","Dawn Craft","Snow Gale","Roadblock","Solar Void","Crisis","Nail Biter","Inferno","Footslam","Thunderbird","Rogue Star","Battle Angel","Gatling","Cloud Surge","Flame Wing","Pyro Blitz","Void Blitz","Sun Rush","Jumped","Chasm Face","Fifth Harmony","Day Walker","Nemesis","Iron Blaze","Sky Meld","Captain Peroxide","Claw Spark","Night Vein","I am Fire","Ghost Craft","Rooster","Gray Cat","Solar Wave","Dexter","Harlem","Reaper","Doom Mark","Cobra Bite","Glitterness","Black Beauty","Dawn Gloom","Capital F","Broomspun","Storm Rider","Pyro Rider","Eerie Mizzen","Pixel Wolf","Swift Void","Nova Spear","Captain Fire","Sea Viper","Solar Gale","Silk Fog","Back Bett","Agrippa","Ether Wave","Grey Owl","Howitzer","Fire Mist","Acid Gosling","Pyro Surge","Strong Position","Silk Craft","Daffy Girl","Head Popper","Wild Storm","Dr Fast","Wild Glow","Rubble","Silk Dust","Cupid Dust","Iron Fern","Sandbox","Void Star","Zen Storm","Glow Fang","Wolf Veil","Berserker","Wind Gale","Myth Vortex","Ice Wave","Iron Rush","Iron Pulse","Neon Wave","Rogue","Upsurge","Star Twine","Gold Frost","Zenith Sky","Quantum X","Shadow Gleam","Pyro Storm","Thunder X","Gold Gale","Iron Dust","Notorious","Void Fern","Ember Wave","Umbrella Gang","Blaze Blitz","Admiral Scott","The Orange Frog","Ether Wing","Dark Pulse","Pumps","Blaze Fern","Zen Crest","Luna Pixel","Pyro Gale","Cloud Rage","Fire By Mis Fire","Ember Mist","Danimal Daze","Hyper Craft","Tweek","Duck Duck","Sun Ray","Command X","Gold Rider","Ultimate Gamer","Neon Vortex","Rimfire","Rain Mist","Void Surge","Bit Whirl","Dark Veil","Flare Zen","Torpedo","Blaze Surge","Poptart AK47","Tusk","Dawn Frost","Blitz","Rune Rider","Rain Blade","Frost Wave","Lunar Storm","Trollers Goals","The Purple Bear","Dragonite","Silk Rider","Sienna Princess","Red Fisher","Hex Vortex","Sky Blitz","Star Spear","Cloud Swift","Tomcat","Glow Wave","Kill Thing","Wildcat","Electric Player","Data Frost","Wolf Rage","Darling Peacock","Agent Hercules","Lunar Wind","Sun Surge","Ice Knight","Boom Blaster","Sky Wave","Shadow Wave","Sea Blight","Pixel Vex","Captain Zinc","Wind Blitz","Nano Frost","The Dark Horse","Dug Funnie","Black Mamba","Golden Hawk","Blaze Rider","Blazing Shooter","Tide Crash","Zen Spark","Night Flare","Sick Rebellious","Dark Myst","Frost Byte","Wolf Surge","Fire Fish","Sky Bully","Ironclad","Out Of Ammo","Ion Trail","Sea Storm","Big Papa","Disco Mate","Fender Boy","Glow Rider","Fennel Dove","Geronimo","Dawn Pulse","Craniax","Novax","Killer Queen","Casablanca","Frost Storm","Nova Wind","Solar Fyre","Titan Roar","Static Vow","The Fire Dude","Night Echo","Alley Frog","Wolf Rider","Bootleg Taximan","Riveter","Sea Rider","Cocktail","Lava Bolt","Returns","Pyro Wing","Ice Flame","Congo Wire","Flame Storm","Storm Craft","Glow Tide","Sea Thorn","Lunar Veil","Renegade Slugger","Radioactive Man","Silk Blaze","Fire Rider","Shadow","Artemis","Vixen","Not Enough Coffee","Ember Hex","Anomaly","Rune Storm","Plasm Edge","Nova Veil","Rude Sniper","Mortar","Death Machine","Miracle","Sky Thorn","Acid Flux","Storm Peak","Iron Tide","Cyborg99","Venom Dash","Big Fast","Wolf Storm","The Fox","Moon Rift","Sea Surge","Daisy Craft","Soul Keeper","Gale Force","Bazooka Hardehar","Prometheus","Cosmo","Wild Rider","Ion Fang","Pyro Flare","Star Fury","Zen Tornado","Blaze Gale","Phantom Veil","Sea Wave","Disguised","Wave Rider","Star Crash","Claw","Steel Warfare","Bowser","Racy Lion","Widow","Sting","Moon Rider","Wild Blitz","Gale Hawk","The Green Tiger","Insomnia","Bomber","Surge","Uber Fast","Blazing Fast","Enigma","Robert Gaming","Ember Surge","Tide Vortex","Crypt Song","Dangle","Sun Drift","Bowie","Fleabag","Stone Hawk","Tito","Criss Cross","Sea Shadow","Hex Craft","Rune Wolf","Storm Hex","Luna Blaze","Soul Crusher","Wrath","Shoot2Kill","Hobo","Void Spear","Saint La ZBoy","Lets Go","Nova Wave","Ember Blitz","Wild Surge","Silver Eagle","Aero","Insane Woman","Star Borne","Steel Calm","Star Shade","Fury","Cyber Craft","Nova Blade","Shadow Hex","Level Up","Mutant","Neon Slash","Sea Borne","Stabber","Esquire","Given Moment","Cool Whip","Patrick Not Swayze","Wild Root","Silk Vortex","Cloud Rider","Dusk Wave","Iron Vortex","Zen Rider","Red Rhino","Eye Shooter","Tide Voyage","Roulette","Glock","Homely Sharpshooters","Cujo","Leonidas","Cool Iris","Flame Rift","Wave Myst","Nova Rider","Spark Dust","Doz Killer","Gold Veil","Nova Spark","Jesse James","Pink Destruction","Hijacker","Bloodbath","Chew Chew","Gliding Master","Nano Wave","Poppy Coffee","Dusk Wind","Cloud Rush","Night Veil","Night Rush","Pyro Wave","Colada","Ultimate Guide","Ice Veins","Silk Storm","Silk Fang","Rock Spire","Lava Gale","Star Void","Banshee","Seal Snake","Fire Gale","Ember Tide","Sand Stab","Vibe Wave","Redfisher","Savage","Solar Rider","Atomic Arsenic","Void Tide","Cyber Fang","Username Envy","Kevlar","Riff Raff","Username Taken","Ember Veil","Fisheye","Fist Wizard","Viper","Red Combat","Tide Pulse","Sun Blitz","Scalp","Hannibal","Soleus","Cabbie","Pyro Tide","Fire Ash","Socket","Iron Frost","Snake","Schizo","Cannon","All Muscles","Blaze","Beatle King","Phoenix","Daemon","Grave","Data Rush","Rune Blitz","Byte Force","Hyper Ion","Endeavour","Gold Surge","Breadmaker","Wind Rush","Iron Shade","Flame On","Nova Flare","Frost Rider","Lash","Sun Gale","Flagship Property","Blaze Dust","Harry Dotter","Uprising","Just Madness","Storm","Fire Wave","The Great Shark","Hazzard","Fire Feline","Quantum Vex","Psycho","Wind Veil","Silk Blitz","Vortex Fury","Legacy","Electric Saturn","Fire Veil","Fester","Mighty Mafia","Bowler","Zen Blade","Panther","Fast Draw","Torque","Razor Fin","Iron Blitz","Frost Surge","Elactix Nova","Titan Craft","Furore","Centurion Sherman","Steel Foil","Dropkick","River Maw","Void Rider","Void Blaze","Night Gale","Data Echo","Dark Fray","Mannequin","Heroin","Cloud Veil","Rebellion","Digger","Chicago Blackout","Zen Blitz","Penny","Myth Echo","Pyro Rush","Jade Wave","Cheese Touch","Ion Craft","Byte Storm","Fabulous","Bug Blitz","Barbie","Raid Bucker","Flare Glow","Echo Dust","Nova Whirl","Blister","Dusk Flare","Pixel Echo","Star Chill","Bad Bunny","Ember Zen","Atomic Blastoid","Void Snare","Cereal Killer","Scare Stone","Upper","Void Crux","Venom Sky","Thorn Wind","Sun Rider","Data Craft","Silver Stone","Gunner","Perseus","Sky Flare","Bad Soldier","Scary Pumpkin","Hex Frost","Flex Nova","Iron Wave","Bug Fire","Diamond Gamer","Titanium","Hex Dust","Trigger Head Kill","Jade Vortex","Ember Gale","Freak Machine","Quantum Sky","Swipe Right","Napoleon","Nova Gale","Vulture","Drugstore Cowboy","Vex Storm","Thing Called Deadly","Sky Surge","Vortex Wave","Tempest","Nano Dust","Pusher","Half Pint","Perfecto","Sherwood Gladiator","Sythe","Revenger","Cloud Fury","Siddhartha","Frost Vortex","Data Wave","Sniper","Bat Woman","Rune Surge","Reed Lady","Rage","Glow Hex","Lunar Gale","Sky Glow","Father Abbot","Silk Ghost","Silk Rush","Meme Man","Legacy Lithium","Frost Axe","Hex Scorch","Screwtape","Quake Ruin","Dahlia Bumble","Insidious","Decay","Cyber Drift","Terminator","Glow Fury","Glint Sun","Roar Sweetie","Slaughter","Sky Venom","Beauty Popper","Cyber Wave","Hell Fire","Furious","Resin","Cyrus","Night Storm","Sky Rush","Cloud Gale","Gloom Craft","Wild Veil","Zero Dust","Polar Bee","Skinner","Sky Rider","Terror","Storm Bend","Silk Drift","Ice Surge","Sol Nimbus","Dark Matter","Darkside Orbit","Zero Frost","Sun Storm","Blistered Outlaw","Roller Turtle","Kaleidoscope","New Ambush","Venom","Fire Hex","Quantum Fog","Cobra","Betty Cricket","Ember Root","Dreader","Phantom Wave","Sun Veil","Ice Veil","Buckshot","XSkull","Rock Blaze","Ghost Vibe","Exotic Alpha","Shadow Vex","Lolita","Frost Wing","Dark Horse","Automatic Slicer","Total Tiger","Sabotage","Razor","Sky Wrath","Red Feet","Ripley","Star Howl","Tide Myst","Don Stab","Tide Gale","Spider Fingers","Dracula","Huntress","Frost Blast","Bearded Angler","Siren","Canary","Dusk Raven","Super Woman","Stone Gale","Star Gale","Flame Blitz","Death Wish","Lithium","Candy Butcher","Wild Fang","Rigs","Tornado","Beetle King","Ice Blitz","Archer","Madness","Unique Identity","Breaker","Grizzly","Albatross","Adopted Ninja","Shiver","Night Sear","Duplicate","Thundero","Manifesto","Turbo Sage","Jade Echo","Glow Veil","Iron Mist","Dream Hex","Iron Rider","Sky Tide","Femme Fatale","Iron Fang","Fire Lash","Frost Spear","Night Blitz","Countess","Ether Nova","Night Craft","Crazy Eights","Wardon","Code Vortex","Bugger","Demented","Angels Creed","Deadman","Chill Nova","Rune Wind","Dark Being","Solar Storm","Iron Vein","Frost Fern","Andy Alfredo","Ice Rider","Lunar Rush","Ember Fern","Angel","Firecracker","Fog Crest","Conqueror","Show Me Urguts","Purify"];getNickname(){let e=parseInt(localStorage.getItem(u.localStorage.nicknameGeneratorKey))||0;e>=p.#z.length&&(e=0),h.log("Looking up nickname: "+e);const t=p.#z[e];return e++,e>=p.#z.length&&(e=0),localStorage.setItem(u.localStorage.nicknameGeneratorKey,e.toString()),t}}const y=new p;class f{static#U=["😃","😁","😇","😉","😍","😋","😜","🤪","🧐","🤓","😎","🤩","🥳","🫣","🤥","😬","😵‍💫","🤐","🤠","🤑","🥴","🥸"];constructor(e,t){this.scoreElement=document.getElementById(`score-${e}`),this.emojiElement=document.getElementById(`emoji-${e}`),this.nameElement=document.getElementById(`name-${e}`),this.scoreBarElement=document.getElementById(`score-bar-${e}`),this.id=e,this.emoji=this.#O(t),this.name=y.getNickname(),this.score=0,this.life=100,this.emojiElement.textContent=this.emoji,this.nameElement.textContent=this.name,this.#_(),this.#j()}#O(e){return t(f.#U.filter((t=>t!==e)))}#_(){this.scoreElement.textContent=this.score}#j(){this.scoreBarElement.style.width=`${this.life}%`,this.isDead()&&(this.emojiElement.textContent="☠️")}increaseScore(e,t){h.log(`Increase score (${e}, ${t})`);const n=this.isDead();this.score+e<0?this.score=0:this.score+=e,this.life+t>100?this.life=100:this.life+t<0?this.life=0:this.life+=t,!n&&this.isDead()&&s.sendPlayerDead(this),this.#_(),this.#j()}addPenalty(){const e=this.isDead();this.life-u.game.penalty.points<0?this.life=0:this.life-=u.game.penalty.points,!e&&this.isDead()&&s.sendPlayerDead(this),this.#j()}isPlayer1(){return"player1"===this.id}isDead(){return this.life<=0}}class b{static#K="bonus";static#$="devil";static#q="medicine";static#Y="fruit";static#Z=["👹","👺"];static#Q=["🩹","💊","💉","🧪","⛑️"];static#X=["🍎","🍐","🍊","🍋","🍌","🍉","🍇","🍓","🫐","🍈","🥭","🍍","🥥","🥝"];static#J=[{id:"small",width:u.emoji.width.small,fontSize:u.emoji.fontSize.small,factor:3},{id:"medium",width:u.emoji.width.medium,fontSize:u.emoji.fontSize.medium,factor:2},{id:"large",width:u.emoji.width.large,fontSize:u.emoji.fontSize.large,factor:1}];constructor(){let e;this.size=t(b.#J),e=this.#ee()?this.#te:this.#ne()?this.#ie:this.#re()?this.#oe:this.#ae,[this.emoji,this.type,this.score,this.health]=e(this.size.factor)}#ee(){return Math.random()<u.emoji.probability.bonus}#ne(){return Math.random()<u.emoji.probability.devil}#re(){return Math.random()<u.emoji.probability.medicine}#te(e){return[null,b.#K,u.emoji.score.bonus.score*e,u.emoji.score.bonus.health*e]}#ie(e){return[t(b.#Z),b.#$,u.emoji.score.devil.score*e,u.emoji.score.devil.health*e]}#oe(e){return[t(b.#Q),b.#q,u.emoji.score.medicine.score*e,u.emoji.score.medicine.health*e]}#ae(e){return[t(b.#X),b.#Y,u.emoji.score.fruit.score*e,u.emoji.score.fruit.health*e]}isBonus(){return this.type===b.#K}isDevil(){return this.type===b.#$}isMedicine(){return this.type===b.#q}}const v=new class{constructor(){this.handleConfigUpdated=this.handleConfigUpdated.bind(this),s.addEventListener(s.getConfigUpdatedType(),this.handleConfigUpdated)}initKeyBindings(){document.addEventListener("keydown",function(e){const t=e.key;"c"===t&&this.#se(),"d"===t&&h.toggleVisibility(),"m"===t&&g.toggleUseBackgroundMusic(),"s"===t&&g.toggleUseSoundEffects(),"0"===t&&g.setMasterVolume(1),t>="1"&&t<="9"&&g.setMasterVolume(parseFloat(t)/10)}.bind(this))}#se(){const e=document.getElementById("key-bindings-screen");"visible"===e.style.visibility?e.style.visibility="hidden":(this.#le(),e.style.visibility="visible")}handleConfigUpdated(){this.#le()}#le(){document.getElementById("debug-logger-status").textContent=h.isVisible(),document.getElementById("master-volume-status").textContent=100*g.getMasterVolume()+"%",document.getElementById("background-music-status").textContent=g.isUseBackgroundMusic(),document.getElementById("sound-effects-status").textContent=g.isUseSoundEffects()}},E=new class{#de=1e3;getAvailablePosition(e,t,n){const i=this.#ue(t);let r,o;for(let t=0;t<this.#de;t++)if(r=this.#ce(e,n.size.width),o=this.#he(r,n.size.width),!this.#ge(o,i))return r;return h.log("Giving up finding available spot"),r}#ue(e){return e.map((e=>this.#he(e.getPosition(),e.getEmoji().size.width)))}#he(e,t){return{left:e.x,top:e.y,right:e.x+t,bottom:e.y+t}}#ce(e,t){return{x:Math.floor(Math.random()*(e.offsetWidth-t)),y:Math.floor(Math.random()*(e.offsetHeight-t))}}#ge(e,t){return t.some((t=>this.#me(e,t)))}#me(e,t){return this.#Se(e,t)&&this.#pe(e,t)}#Se(e,t){return e.top<=t.top&&e.bottom>=t.top||t.top<=e.top&&t.bottom>=e.top}#pe(e,t){return e.left<=t.left&&e.right>=t.left||t.left<=e.left&&t.right>=e.left}};class k{static#ye=10;static#fe="emoji-hunter";#be(){return document.getElementById("high-scores")}updateHighScores(){u.system.useRemoteHighScores||(this.#be().innerHTML=this.#ve(this.#Ee()))}updateRemoteHighScores(e){h.log("Received remote high scores"),this.#be().innerHTML=this.#ve(e.slice(0,k.#ye))}#ve(e){for(;e.length<k.#ye;)e.push(this.#ke());let t='\n        <table id="high-scores-table">\n        <thead>\n            <tr>\n                <th>Rank</th>\n                <th>Name</th>\n                <th>Score</th>\n            </tr>\n        </thead>\n        <tbody>';return e.forEach(((e,n)=>{t+=`\n            <tr>\n                <td>${n+1}</td>\n                <td class="high-score-name">${e.name} <span class="high-score-time">(${o(e.time)})</span></td>\n                <td class="high-score-score">${e.score}</td>\n            </tr>`})),t+="</tbody></table>",t}#Ee(){return JSON.parse(localStorage.getItem(u.localStorage.highScoreKey))||[]}saveHighScores(e){u.system.useRemoteHighScores?this.#Ce(e.map((e=>this.#Te(e)))):e.forEach((e=>this.#Be(this.#Te(e))))}#Ce(e){h.log("Send to remote high scores"),window.top.postMessage({type:"highscore",action:"update",data:{id:k.#fe,list:e}},"*")}#Be(e){let t=this.#Ee(),n=t.findIndex((t=>e.score>t.score));if(-1!==n)h.log(`New high score: ${e.name} (${e.score})`),t.splice(n,0,e);else{if(!(t.length<k.#ye))return void h.log(`No high score: ${e.name} (${e.score})`);h.log(`New high score: ${e.name} (${e.score})`),t.push(e)}t.length>k.#ye&&(t=t.slice(0,k.#ye)),localStorage.setItem(u.localStorage.highScoreKey,JSON.stringify(t))}#Te(e){return{id:k.#fe,name:`${e.emoji} ${e.name}`,score:e.score,time:(new Date).toISOString()}}#ke(){return{id:k.#fe,name:"Nobody",score:0,time:(new Date).toISOString()}}}const C=new k;class T{static#Re=60;#De=document.getElementById("start-screen");#Ie=document.getElementById("start-screen-start");#Fe=document.getElementById("start-screen-quit");#we=document.getElementById("result-screen");#Me=document.getElementById("result-screen-start");#xe=document.getElementById("result-screen-quit");#Pe=document.getElementById("quit-counter");#Ve;#Ge;#He;#We=[];#Ne=[];#Le;#Ae;#ze;#Ue;constructor(){h.log(`isProduction: ${d.isProduction()}`),v.initKeyBindings(),this.#Oe(),this.#_e(),this.#je(),this.#Ke(),this.handleTargetRemoved=this.handleTargetRemoved.bind(this),s.addEventListener(s.getTargetRemovedType(),this.handleTargetRemoved),this.handlePlayerDead=this.handlePlayerDead.bind(this),s.addEventListener(s.getPlayerDeadType(),this.handlePlayerDead),this.handleConfigUpdated=this.handleConfigUpdated.bind(this),s.addEventListener(s.getConfigUpdatedType(),this.handleConfigUpdated)}#$e(){return document.getElementById("game-area")}#Oe(){this.#We=[];const e=new f("player1",""),t=new f("player2",e.emoji);this.#We.push(e),this.#We.push(t)}#_e(){this.#Ie.addEventListener("click",function(){this.#qe()}.bind(this)),this.#Fe.addEventListener("click",function(){this.#Ye()}.bind(this))}#je(){this.#Me.addEventListener("click",function(){this.#Ze()}.bind(this)),this.#xe.addEventListener("click",function(){this.#Ye()}.bind(this))}#Ke(){this.#$e().addEventListener("click",function(e){h.log(`Clicked background (${e.clientX}, ${e.clientY})`),this.#Qe(e)}.bind(this))}#Qe(e){const t=document.createElement("div");t.className="click-animation",t.style.top=`${e.clientY}px`,t.style.left=`${e.clientX}px`,this.#$e().appendChild(t),t.addEventListener("animationend",function(){t.parentElement.removeChild(t)}.bind(this))}handleConfigUpdated(){this.#Ue&&g.isUseBackgroundMusic()?g.playBackgroundMusic():this.#Ue&&!g.isUseBackgroundMusic()&&g.pauseBackgroundMusic()}#qe(){h.log("Start game"),this.#Le=0,this.#Ae=u.game.penalty.updaterInitialSleepTime,this.#Ue=!0,this.#De.style.visibility="hidden",this.#Xe().then((()=>{this.#Je(),this.#et()})),g.playBackgroundMusicFromStart()}#tt(){h.log("Players dead - stopping timers!"),this.#Ue=!1,clearInterval(this.#Ve),clearInterval(this.#Ge),C.saveHighScores(this.#We),g.pauseBackgroundMusic(),i(1500).then((()=>{this.#nt()}))}#nt(){C.updateHighScores(),this.#we.style.visibility="visible",this.#ze=T.#Re,this.#it()}#it(){0===this.#ze?this.#Ye():(this.#Pe.textContent=this.#ze--+" seconds left",this.#He=setTimeout(this.#it.bind(this),1e3))}#Ze(){h.log("Restart game"),clearInterval(this.#He),this.#De.style.visibility="visible",this.#we.style.visibility="hidden",this.#Oe()}#Ye(){h.log("Quit game"),this.#Ze(),window.top.postMessage({type:"menu"},"*")}async#Xe(){for(let e=1;e<=u.game.target.count;e++)this.#rt(this.#We[0]),await i(250),this.#rt(this.#We[1]),await i(250)}handleTargetRemoved(e){e.detail.player.isDead()||this.#rt(e.detail.player)}#rt(e){const t=new b,n=this.#$e(),i=E.getAvailablePosition(n,this.#Ne,t);this.#Ne.push(new S(n,e,t,i))}handlePlayerDead(e){const t=e.detail.player;h.log(`Player dead: ${t.id}`),g.playPlayerDead(t),this.#Ne.filter((e=>e.getPlayer()===t)).forEach((e=>e.expire()))}#ot(){this.#Ne=this.#Ne.filter((e=>!e.isLocked())),this.#at(this.#We[0]),this.#at(this.#We[1])}#at(e=this.#We[0]){let t=this.#Ne.findIndex((t=>t.getPlayer()===e));t>-1&&(this.#Ne[t].expire(),this.#Ne.splice(t,1))}#Je(){this.#Ve=setInterval(function(){this.#ot()}.bind(this),u.game.target.updaterSleepTime)}#et(){this.#We.forEach((e=>e.addPenalty())),this.#We.every((e=>e.isDead()))?this.#tt():(this.#Le++,this.#Le>u.game.penalty.updaterDecreaseFrequency&&(this.#Le=0,this.#st()?this.#Ae=u.game.penalty.updaterMinimumSleepTime:this.#Ae-=u.game.penalty.updaterDecreaseSleepTime,h.log(`Penalty speed: ${this.#Ae}`)),this.#Ge=setTimeout(this.#et.bind(this),this.#Ae))}#st(){return this.#Ae-u.game.penalty.updaterDecreaseSleepTime<u.game.penalty.updaterMinimumSleepTime}}var B=n(72),R=n.n(B),D=n(825),I=n.n(D),F=n(659),w=n.n(F),M=n(56),x=n.n(M),P=n(540),V=n.n(P),G=n(113),H=n.n(G),W=n(365),N={};N.styleTagTransform=H(),N.setAttributes=x(),N.insert=w().bind(null,"head"),N.domAPI=I(),N.insertStyleElement=V(),R()(W.A,N),W.A&&W.A.locals&&W.A.locals,u.system.useLivenessTimer&&(h.log("Init liveness timer"),setInterval((function(){h.log("Ping liveness!"),window.top.postMessage({type:"ping"},"*")}),5e3)),u.system.useRemoteMessageHandler&&(h.log("Init remote message handler"),window.onmessage=function(e){const t=e.data;if("hit"===t.type){const e=document.elementFromPoint(t.data.x,t.data.y);if(e){const n=new MouseEvent("click",{bubbles:!0,cancelable:!0,view:window,clientX:t.data.x,clientY:t.data.y});e.dispatchEvent(n)}}else"highscore"===t.type&&C.updateRemoteHighScores(t.data.list)}),document.getElementById("start-screen").innerHTML='<div id="start-screen-start" class="dialog-screen-start"> <div class="dialog-action-text"> Start Game </div> </div> <div class="dialog-screen-content"> <h2 class="mbl">Get Ready</h2> <p class="mbm"> Hit the fruits to earn points, but ensure to hit health equipment<br/> to stay alive. Smaller targets give you higher score! </p> <p class="mbm"> Ensure to hit your own targets, so you don\'t give away<br/> 😅 points to your opponent 😅 </p> <p class="mbm"> If you\'re lucky to get the Oslo logo,<br/> 🤩 target it to get a great bonus! 🤩 </p> <p class="mbl"> Tip:<br/> Don\'t shoot the devil! It will hurt your score.<br/> 🤔 Or maybe shoot the devil? 🤔 </p> <h3>Press c for configuration</h3> </div> <div id="start-screen-quit" class="dialog-screen-quit"> <div class="dialog-action-text"> Quit Game </div> </div> ',document.getElementById("result-screen").innerHTML='<div id="result-screen-start" class="dialog-screen-start"> <div class="dialog-action-text"> Play Again </div> </div> <div class="dialog-screen-content"> <h2 class="mbl">High Scores</h2> <div id="high-scores" class="mbl"></div> <h3 id="quit-counter"></h3> </div> <div id="result-screen-quit" class="dialog-screen-quit"> <div class="dialog-action-text"> Quit Game </div> </div> ',document.getElementById("key-bindings-screen").innerHTML='<div class="dialog-screen-content"> <h2 class="mbl">Configuration and key bindings</h2> <table id="key-bindings-table" class="mbl"> <tbody> <tr> <th>m</th> <td>Play background music</td> <td>(<span id="background-music-status"></span>)</td> </tr> <tr> <th>s</th> <td>Play sound effects</td> <td>(<span id="sound-effects-status"></span>)</td> </tr> <tr> <th>1 .. 9</th> <td>10 .. 90% volume</td> <td>(<span id="master-volume-status"></span>)</td> </tr> <tr> <th>0</th> <td>100% volume</td> <td></td> </tr> <tr> <th>d</th> <td>Show debug logger</td> <td>(<span id="debug-logger-status"></span>)</td> </tr> </tbody> </table> <h3>Press c to continue</h3> </div>',new T})()})();